---
import Layout from '../layouts/Layout.astro';
import logoUrl from '../assets/brand/rapid-sites-logo.svg?url';
const title = 'Get Your Professional Website | Affordable Web Design South Africa | Rapid Sites';
const description = 'Start your professional website development today. Complete our intake form to secure your development slot. Fast 48-hour delivery, mobile-optimized websites from R7,500 for South African businesses.';
---

<Layout {title} {description}>
  <!-- Slim page header -->
  <header class="sticky top-0 z-30 bg-white border-b border-neutral-200/80">
    <div class="container-page h-16 flex items-center justify-between">
      <a href="/" class="flex items-center gap-2">
        <img src={logoUrl} alt="Rapid Sites - Professional Website Design South Africa" class="h-6 w-auto" />
      </a>
      <a href="/" class="inline-flex items-center justify-center rounded-[9999px] px-4 py-2 text-xs font-medium text-black border border-black bg-transparent hover:bg-black/5 focus:outline-none focus:ring-2 focus:ring-black focus:ring-offset-2 transition-colors">Back to homepage</a>
    </div>
  </header>
  <section class="section">
    <div class="container-page">
      <div class="max-w-3xl mx-auto">
        
        <!-- Loading State -->
        <div x-data="{ loaded: false }" x-init="setTimeout(() => loaded = true, 100)">
          <div x-show="!loaded" class="card p-6 md:p-8 text-center">
            <div class="flex flex-col items-center gap-4">
              <svg class="animate-spin h-8 w-8 text-[var(--color-brand-600)]" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
              <p class="text-neutral-600">Loading intake form...</p>
            </div>
          </div>
          <div x-show="loaded" x-transition class="card p-6 md:p-8" x-data="{ 
            step: 1, 
            total: 3, 
            showAll: false,
            nextStep() {
              this.step++;
              window.scrollTo({top: 0, behavior: 'smooth'});
            }
          }">
          <div class="flex items-start justify-between">
            <div>
              <h1 class="heading-section">Client Intake Form</h1>
              <p class="mt-2 text-sm text-neutral-600">Complete this form to begin your professional website development. A <strong>R3,750 deposit</strong> secures your development slot, with the remaining <strong>R3,750</strong> due on completion. Your website will be ready for approval within <strong>24–48 hours</strong> of deposit payment.</p>
            </div>
          </div>

          <hr class="my-6 border-neutral-200" />
          <!-- Progress -->
          <div class="mb-6">
            <div class="flex items-center justify-between text-xs text-neutral-600">
              <span>Step <span x-text="step"></span> of <span x-text="total"></span></span>
              <span x-text="Math.round((step/total)*100) + '%' "></span>
            </div>
            <div class="mt-2 h-2 bg-neutral-200 rounded-full overflow-hidden">
              <div class="h-full bg-[var(--color-brand-700)]" :style="{ width: ((step/total)*100) + '%' }"></div>
            </div>
          </div>

                          <form name="client-intake" method="POST" action="/.netlify/functions/send-intake" class="space-y-8">

            <!-- STEP 1: Business Information -->
            <div x-show="showAll || step === 1" x-cloak class="space-y-4" x-ref="step1">
              <h2 class="text-lg font-semibold">Business Information</h2>
              <div>
                <label class="label">Business Name *</label>
                <input class="input" type="text" name="business_name" placeholder="Your company name" required />
              </div>
              <div>
                <label class="label">Contact Person *</label>
                <input class="input" type="text" name="contact_name" placeholder="Your full name" required />
              </div>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label class="label">Email Address *</label>
                  <input class="input" type="email" name="email" placeholder="your.email@company.com" required />
                </div>
                <div>
                  <label class="label">Phone Number *</label>
                  <input class="input" type="text" name="phone" placeholder="081 234 5678" required />
                </div>
              </div>
              <div>
                <label class="label">WhatsApp Number *</label>
                <input class="input" type="text" name="whatsapp" placeholder="081 234 5678" required />
              </div>
              <div>
                <label class="label">Business Address *</label>
                <input class="input" type="text" name="location" placeholder="123 Main Street, Cape Town, 8001, Western Cape" required />
              </div>

              <div class="pt-4 flex items-center justify-end gap-3">
                <button type="button" class="button-primary" @click="nextStep()">Next</button>
              </div>
            </div>

            <!-- STEP 2: Business Details + Online Presence -->
            <div x-show="showAll || step === 2" x-cloak class="space-y-6" x-ref="step2">
              <div class="space-y-4">
                <h2 class="text-lg font-semibold">Business Details</h2>
                <div>
                  <label class="label">Industry *</label>
                  <select class="input" name="industry" required>
                    <option value="">Select your industry</option>
                    <option>Professional Services</option>
                    <option>Medical/Healthcare</option>
                    <option>Legal</option>
                    <option>Accounting</option>
                    <option>Construction</option>
                    <option>Automotive</option>
                    <option>Restaurant/Food</option>
                    <option>Retail</option>
                    <option>Beauty/Wellness</option>
                    <option>Consulting</option>
                    <option>Real Estate</option>
                    <option>Other</option>
                  </select>
                </div>
                <div>
                  <label class="label">Business Description *</label>
                  <textarea class="textarea" name="business_description" rows="3" maxlength="300" placeholder="Briefly describe your main services or products" required></textarea>
                </div>
                <div>
                  <label class="label">Main Services/Products * (list in order of importance)</label>
                  <textarea class="textarea" name="services" rows="3" maxlength="400" placeholder="List your main services or products in order of importance" required></textarea>
                </div>
                <div>
                  <label class="label">Target Customers *</label>
                  <textarea class="textarea" name="target_customers" rows="2" maxlength="200" placeholder="Who are your ideal customers?" required></textarea>
                </div>
                <div>
                  <label class="label">Business Hours *</label>
                  <select class="input" name="business_hours" required>
                    <option value="">Select your business hours</option>
                    <option value="mon_fri_8_5">Monday-Friday 8AM-5PM</option>
                    <option value="mon_fri_9_5">Monday-Friday 9AM-5PM</option>
                    <option value="mon_fri_8_6">Monday-Friday 8AM-6PM</option>
                    <option value="mon_sat_8_5">Monday-Saturday 8AM-5PM</option>
                    <option value="mon_sat_9_5">Monday-Saturday 9AM-5PM</option>
                    <option value="24_7">24/7 Service</option>
                    <option value="custom">Custom hours (we'll contact you)</option>
                  </select>
                </div>
                <div>
                  <label class="label">Brand Colors (optional)</label>
                  <input class="input" type="text" name="brand_colors" placeholder="e.g., Blue and white, Corporate red, Green theme" />
                </div>
                <div>
                  <label class="label">Business Tone *</label>
                  <div class="mt-2 grid grid-cols-2 md:grid-cols-4 gap-2 text-sm">
                    <label class="inline-flex items-center gap-2"><input type="radio" name="business_tone" value="professional" required /> <span>Professional</span></label>
                    <label class="inline-flex items-center gap-2"><input type="radio" name="business_tone" value="friendly" required /> <span>Friendly</span></label>
                    <label class="inline-flex items-center gap-2"><input type="radio" name="business_tone" value="modern" required /> <span>Modern</span></label>
                    <label class="inline-flex items-center gap-2"><input type="radio" name="business_tone" value="traditional" required /> <span>Traditional</span></label>
                  </div>
                </div>
              </div>

              <hr class="border-neutral-200" />

              <div class="space-y-4">
                <h2 class="text-lg font-semibold">Current Online Presence</h2>
                <div>
                  <label class="label">Current Website</label>
                  <input class="input" type="url" name="current_website" placeholder="https://yourwebsite.co.za (leave blank if none)" />
                </div>
                <div>
                  <label class="label">Do you have a domain? *</label>
                  <div class="mt-2 grid grid-cols-1 md:grid-cols-3 gap-2 text-sm">
                    <label class="inline-flex items-center gap-2"><input type="radio" name="has_domain" value="yes_co_za" required /> <span>Yes, I own a .co.za domain</span></label>
                    <label class="inline-flex items-center gap-2"><input type="radio" name="has_domain" value="yes_other" required /> <span>Yes, I own another domain (.com, etc.)</span></label>
                    <label class="inline-flex items-center gap-2"><input type="radio" name="has_domain" value="no" required /> <span>No, I need help getting a domain</span></label>
                  </div>
                </div>
                <div>
                  <label class="label">Domain Name</label>
                  <input class="input" type="text" name="domain_name" placeholder="yourcompany.co.za" />
                </div>
                <div>
                  <label class="label">Do you have hosting? *</label>
                  <div class="mt-2 grid grid-cols-1 md:grid-cols-3 gap-2 text-sm">
                    <label class="inline-flex items-center gap-2"><input type="radio" name="has_hosting" value="yes" required /> <span>Yes, I have hosting</span></label>
                    <label class="inline-flex items-center gap-2"><input type="radio" name="has_hosting" value="no" required /> <span>No, I need hosting setup</span></label>
                    <label class="inline-flex items-center gap-2"><input type="radio" name="has_hosting" value="unsure" required /> <span>Not sure</span></label>
                  </div>
                </div>
              </div>

              <div class="pt-4 flex items-center justify-between gap-3">
                <button type="button" class="button-secondary" @click="step = 1; window.scrollTo({top: 0, behavior: 'smooth'})">Back</button>
                <button type="button" class="button-primary" @click="nextStep()">Next</button>
              </div>
            </div>

            <!-- STEP 3: Requirements + Extras + Submit -->
            <div x-show="showAll || step === 3" x-cloak class="space-y-6" x-ref="step3">
              <div class="space-y-4">
                <h2 class="text-lg font-semibold">Website Requirements</h2>
                <div>
                  <label class="label">Main goals for your website *</label>
                  <div class="mt-2 grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm">
                    <label class="inline-flex items-center gap-2"><input type="checkbox" name="goals[]" value="get_found_google" /> <span>Get found on Google</span></label>
                    <label class="inline-flex items-center gap-2"><input type="checkbox" name="goals[]" value="look_professional" /> <span>Look more professional</span></label>
                    <label class="inline-flex items-center gap-2"><input type="checkbox" name="goals[]" value="capture_inquiries" /> <span>Capture customer inquiries</span></label>
                    <label class="inline-flex items-center gap-2"><input type="checkbox" name="goals[]" value="show_services" /> <span>Show our services clearly</span></label>
                    <label class="inline-flex items-center gap-2"><input type="checkbox" name="goals[]" value="build_trust" /> <span>Build trust with customers</span></label>
                    <label class="inline-flex items-center gap-2"><input type="checkbox" name="goals[]" value="compete_online" /> <span>Compete with other businesses online</span></label>
                  </div>
                </div>
                <div>
                  <label class="label">Important features</label>
                  <div class="mt-2 grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm">
                    <label class="inline-flex items-center gap-2"><input type="checkbox" name="features[]" value="contact_forms" /> <span>Contact forms</span></label>
                    <label class="inline-flex items-center gap-2"><input type="checkbox" name="features[]" value="whatsapp" /> <span>WhatsApp integration</span></label>
                    <label class="inline-flex items-center gap-2"><input type="checkbox" name="features[]" value="google_maps" /> <span>Google Maps/directions</span></label>
                    <label class="inline-flex items-center gap-2"><input type="checkbox" name="features[]" value="photo_gallery" /> <span>Photo gallery</span></label>
                    <label class="inline-flex items-center gap-2"><input type="checkbox" name="features[]" value="testimonials" /> <span>Customer testimonials</span></label>
                    <label class="inline-flex items-center gap-2"><input type="checkbox" name="features[]" value="service_listings" /> <span>Service listings</span></label>
                    <label class="inline-flex items-center gap-2"><input type="checkbox" name="features[]" value="about_section" /> <span>About us section</span></label>
                    <label class="inline-flex items-center gap-2"><input type="checkbox" name="features[]" value="business_hours" /> <span>Business hours display</span></label>
                  </div>
                </div>
                <div>
                  <label class="label">What makes your business different? *</label>
                  <textarea class="textarea" name="competitive_advantage" rows="3" maxlength="300" placeholder="Describe your competitive advantages, unique selling points, or what sets you apart from competitors" required></textarea>
                </div>
              </div>

              <hr class="border-neutral-200" />

              <div class="space-y-4">
                <h2 class="text-lg font-semibold">Additional Information</h2>
                <div>
                  <label class="label">How did you find us?</label>
                  <select class="input" name="source">
                    <option value="">How did you find Rapid Sites?</option>
                    <option value="google">Google search</option>
                    <option value="referral">Referral from friend/colleague</option>
                    <option value="social_media">Social media</option>
                    <option value="directory">Business directory</option>
                    <option value="other">Other</option>
                  </select>
                </div>
                <div>
                  <label class="label">Anything else we should know?</label>
                  <textarea class="textarea" name="additional_notes" rows="2" maxlength="200" placeholder="Any special requirements, concerns, or questions (optional)"></textarea>
                </div>
              </div>

              <div class="pt-8 mt-2 border-t border-neutral-200 flex flex-col gap-4">
                <div class="text-sm text-neutral-700">
                  <p><strong>Total Investment: from R7,500</strong></p>
                  <ul class="list-disc ml-5 mt-1">
                    <li><strong>Deposit today: R3,750</strong> (secures development slot)</li>
                    <li><strong>Balance on completion: R3,750</strong> (pay when you approve final website)</li>
                  </ul>
                  <p class="mt-2"><strong>What happens after you submit:</strong></p>
                  <ol class="list-decimal ml-5 mt-1">
                    <li>Bank details sent - You'll receive our banking details via email</li>
                    <li>Pay R3,750 deposit - Transfer deposit to secure your development slot</li>
                    <li>Development starts - We begin building within 24 hours of payment confirmation</li>
                    <li>Review & approve - See your completed website, request changes</li>
                    <li>Go live - Pay final R3,750 and your website goes live immediately</li>
                  </ol>
                </div>

                <!-- Design Assets Notice -->
                <div class="bg-amber-50 border border-amber-200 rounded-lg p-4">
                  <div class="flex items-start gap-3">
                    <div class="flex-shrink-0">
                      <svg class="w-5 h-5 text-amber-600 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                      </svg>
                    </div>
                    <div>
                      <h3 class="text-sm font-medium text-amber-800">Design Assets Required</h3>
                      <p class="mt-1 text-sm text-amber-700">
                        After submitting this form, please email your <strong>logo, photos, or any design materials</strong> to 
                        <a href="mailto:hello@rapidsites.co.za" class="font-medium underline">hello@rapidsites.co.za</a>. 
                        This helps us create a website that perfectly matches your brand.
                      </p>
                    </div>
                  </div>
                </div>

                <div class="flex items-center justify-between gap-3">
                  <button type="button" class="button-secondary" @click="step = 2; window.scrollTo({top: 0, behavior: 'smooth'})">Back</button>
                  <button type="button" class="button-primary w-full md:w-auto mt-2" @click="showAll = true; setTimeout(() => { $el.closest('form').submit(); }, 100)">Submit Form & Get Banking Details</button>
                </div>
              </div>
            </div>
          </form>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Simple Footer -->
  <footer class="bg-neutral-50 border-t border-neutral-200/80">
    <div class="container-page py-8">
      <div class="flex flex-col md:flex-row items-center justify-between gap-4">
        <div class="flex items-center gap-2">
          <img src={logoUrl} alt="Rapid Sites - Professional Website Design South Africa" class="h-5 w-auto" />
          <span class="text-sm text-neutral-600">© 2024 Rapid Sites. Professional websites in 48 hours.</span>
        </div>
        <div class="flex items-center gap-6 text-sm text-neutral-600">
          <a href="mailto:hello@rapidsites.co.za" class="hover:text-neutral-900 transition-colors">hello@rapidsites.co.za</a>
          <a href="https://wa.me/27614631005" target="_blank" rel="noopener" class="hover:text-neutral-900 transition-colors">WhatsApp</a>
        </div>
      </div>
    </div>
  </footer>
</Layout>

